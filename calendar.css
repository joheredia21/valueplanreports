/* Calendar - premium skin using Hive colors and modern micro-interactions */
:root{
  --hive-black: #212529;
  --hive-light-gray: #e7e7f1;
  --hive-red: #e31337;
  --hive-red-dark: #9b0f22;
  --text-primary: #212529;
  --text-secondary: #495057;
  --bg-light: #f8f9fa;
  --bg-white: #ffffff;
  --shadow: 0 12px 38px rgba(2,6,23,0.08);
  --border-radius: 14px;
  --transition: all .28s cubic-bezier(.2,.9,.2,1);
  --muted: #6b7280;
}

/* Reset & base */
*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; padding:0; font-family:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; -webkit-font-smoothing:antialiased; }
body{
  background:
    radial-gradient(1200px 600px at 10% -20%, rgba(227,19,55,.06), transparent 60%),
    radial-gradient(1200px 600px at 110% 20%, rgba(227,19,55,.05), transparent 60%),
    linear-gradient(180deg,#fbfdff,var(--bg-light));
  color:var(--text-primary);
  padding:28px;
  padding-top:110px; /* space for top nav */
}

/* Topbar (match main site) */
.site-topbar{
  position:fixed; inset:0 0 auto 0; height:64px; top:0; z-index:1200;
  background:#121416; color:#fff; box-shadow:0 3px 10px rgba(0,0,0,0.25);
}
.site-topbar .topbar-inner{
  max-width:1280px; margin:0 auto; height:100%; display:flex; align-items:center; justify-content:space-between; padding:0 18px;
}
.brand-left{ display:flex; align-items:center; gap:12px; }
.brand-link{ display:flex; align-items:center; gap:10px; color: #fff; text-decoration:none; font-weight:600; }
.brand-icon {
  background-color: transparent !important; /* sin capa de fondo */
  border-radius: 0;                         /* sin bordes redondeados extra */
  padding: 0;                               /* sin espacio alrededor */
  height: 56px;                             /* ajusta el tamaño */
  width: auto;                              /* mantiene proporción */
}

.brand-text{ font-size:16px; color:#fff; }

/* main nav */
.main-nav .nav-list{ list-style:none; display:flex; gap:18px; margin:0; padding:0; align-items:center; }
.main-nav a{ color:#ddd; text-decoration:none; padding:8px 10px; border-radius:6px; font-weight:600; font-size:14px; }
.main-nav a:hover, .main-nav .active a{ color:#fff; background: rgba(255,255,255,0.03); }

/* mobile nav toggle */
.mobile-nav-toggle{ display:none; background:transparent; border:none; color:#fff; width:48px; height:48px; align-items:center; justify-content:center; border-radius:8px; cursor:pointer; }
.mobile-nav-toggle .bar{ display:block; width:18px; height:2px; background:#fff; margin:3px 0; border-radius:2px; }
@media(max-width:920px){
  .main-nav{ display:none; }
  .mobile-nav-toggle{ display:flex; }
  body.nav-open .main-nav{ display:block; position:absolute; top:64px; left:0; right:0; background:#121416; padding:12px 18px; }
  body.nav-open .main-nav .nav-list{ flex-direction:column; gap:8px; }
}

/* Shell & layout */
.app-shell{ max-width:1280px; margin:0 auto; }

/* Header controls for calendar (below topbar) */
.app-header{
  display:flex; align-items:center; justify-content:space-between; gap:18px; margin-bottom:18px;
  padding:18px; background:transparent;
}
.brand{ display:flex; align-items:center; gap:14px; }
.logo{ width:60px; height:60px; border-radius:12px; background:linear-gradient(135deg,var(--hive-red),#ff6b6b); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:800; box-shadow: 0 10px 40px rgba(227,19,55,0.12); }
.title h1{ margin:0; font-size:18px; }
.subtitle{ margin:0; font-size:12px; color:var(--muted); }

/* Controls */
.controls{ display:flex; align-items:center; gap:12px; }
.control-item{ display:flex; align-items:center; gap:8px; color:var(--text-secondary); font-size:13px; }
.control-item select{ padding:8px 10px; border-radius:10px; border:1px solid #eef0f6; background:var(--bg-white); font-weight:600; transition: var(--transition); }

/* --- Toggle switch (elegant, visible) --- */
.switch input{ display:none; }
.switch .toggle{ display:inline-flex; width:64px; height:32px; background: linear-gradient(180deg,#fff,#f4f6fb); border-radius:999px; align-items:center; padding:4px; box-shadow: 0 6px 18px rgba(2,6,23,0.06); transition:var(--transition); border:1px solid rgba(0,0,0,0.04); }
.switch .toggle .knob{ display:block; width:24px; height:24px; border-radius:999px; background:#fff; box-shadow:0 6px 14px rgba(2,6,23,0.08); transform:translateX(0); transition:var(--transition); }
.switch input:checked + .toggle{ background: linear-gradient(90deg,var(--hive-red),var(--hive-red-dark)); }
.switch input:checked + .toggle .knob{ transform:translateX(32px); }
.switch .switch-label{ font-weight:700; font-size:13px; margin-left:6px; color:var(--muted); }

/* Buttons */
.btn-primary{ background: linear-gradient(90deg,var(--hive-red),var(--hive-red-dark)); color:white; border:none; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; display:inline-flex; align-items:center; gap:8px; box-shadow: 0 12px 36px rgba(227,19,55,0.12); transition:var(--transition); }
.btn-primary:hover{ transform: translateY(-2px) scale(1.01); }
.btn-ghost{ background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 12px; border-radius:10px; cursor:pointer; transition:var(--transition); }
.btn-ghost:hover{ transform: translateY(-1px); box-shadow: 0 8px 22px rgba(2,6,23,.06); }
.btn-outline{ background:transparent; color:var(--hive-red); border:1px dashed rgba(227,19,55,0.22); padding:8px 10px; border-radius:10px; cursor:pointer; transition:var(--transition); }
.icon-btn{ background:transparent; border:none; font-size:14px; cursor:pointer; color:var(--muted); transition:var(--transition); }
.icon-btn.red{ color:var(--hive-red); font-weight:800; }
.chart-hint{ margin-left:8px; font-size:13px; color:var(--muted); font-weight:700; }

/* Layout */
.layout{ display:grid; grid-template-columns: 520px 1fr; gap:20px; align-items:start; }

/* Left column */
.left-col{ display:flex; flex-direction:column; gap:14px; }
.compact-calendars{ display:flex; flex-direction:column; gap:12px; }

/* mini calendars */
.mini-cal{ width:100%; height:280px; background: linear-gradient(180deg,#fff,var(--bg-white)); border-radius:12px; padding:10px; box-shadow: var(--shadow); transition:var(--transition); overflow:hidden; }
.mini-cal:hover{ transform: translateY(-3px); }

/* IMPORTANT: ensure day cell number is always visible and events don't expand the cell */
.mini-cal .fc .fc-daygrid-day-frame { position: relative; padding-top: 28px !important; box-sizing: border-box; }
.mini-cal .fc .fc-daygrid-day-number,
.mini-cal .fc .fc-daygrid-day-top { position: absolute; top: 6px; left: 8px; z-index: 6; }
.mini-cal .fc .fc-daygrid-day-number { font-weight:700; background: transparent; padding:0 4px; line-height:1; font-size:13px; color: inherit; }

/* For event-day (red) ensure number remains white and on top */
.mini-cal .fc-daygrid-day.event-day .fc-daygrid-day-number { color:#fff !important; z-index:8; }

/* Limit how many event rows can visually expand inside mini calendars. Keep them truncated */
.mini-cal .fc .fc-daygrid-day-events,
.mini-cal .fc .fc-daygrid-day-events > * {
  max-height: calc(100% - 36px);
  overflow: hidden;
  box-sizing: border-box;
}

/* Compact event appearance inside mini calendars to avoid pushing cell height */
.mini-cal .fc .fc-daygrid-event, 
.mini-cal .fc .fc-event {
  padding: 4px 6px !important;
  margin: 2px 0 !important;
  font-size: 12px !important;
  line-height: 1.05 !important;
  white-space: nowrap !important;
  text-overflow: ellipsis !important;
  overflow: hidden !important;
  display: block !important;
  border-radius: 8px !important;
}

/* Dar un poco de respiro a la columna derecha para que el número no se corte */
/* Ajuste para evitar que el número del sábado se corte en el borde derecho */
.mini-cal {
  /* un poco de respiro a la derecha, evita que el número sea recortado */
  padding-right: 0px; /* prueba 8px / 10px / 12px según tu preferencia visual */
  /* si prefieres no mostrar overflow de sombras, mantén overflow:hidden; 
     si usas overflow:visible en otro sitio, puedes quitar esta línea */
  overflow: hidden;
}
/* Ajuste específico para las celdas de sábado en los mini calendarios */
.mini-cal .fc-day-sat {
  margin-right: 10px; /* prueba con 2px, 3px o 4px según lo que veas mejor */
  box-sizing: border-box; /* asegura que no desborde */
}
/* A: Aumentar espacio dentro de la celda (top area) — aplica solo en mini-cal y sábados */
.mini-cal .fc-daygrid-day.fc-day-sat .fc-daygrid-day-top {
  padding-right: 16px !important; /* prueba 8..14px según resultado */
  box-sizing: border-box;
}



/* Asegura que el número del día esté por encima de los eventos */
.mini-cal .fc .fc-daygrid-day-number,
.mini-cal .fc .fc-daygrid-day-top {
  position: relative !important;
  z-index: 60 !important;
}

/* Limita la altura del área de eventos para que no empuje el top-number */
.mini-cal .fc .fc-daygrid-day-events,
.mini-cal .fc .fc-daygrid-day-events > * {
  max-height: calc(100% - 28px); /* deja espacio suficiente para el número del día */
  overflow: hidden;
  z-index: 1;
}

/* Si aún ves recortes en algunos navegadores, aumenta padding-right a 10-12px */


/* reducir riesgo de empuje por eventos: limitar su altura y z-index */
.mini-cal .fc .fc-daygrid-day-events,
.mini-cal .fc .fc-daygrid-day-events > * {
  max-height: calc(100% - 36px);
  overflow: hidden;
  z-index: 1;
}

/* opcional: si el contenedor estaba usando border-radius y quieres permitir overflow visible */
.mini-cal { overflow: visible; }
/* si usas overflow:visible y quieres mantener el fondo y bordes, entonces envuelve el calendario en .mini-cal-inner
   y aplica background/border-radius a .mini-cal-inner en lugar de .mini-cal */


/* FullCalendar internal tweaks */
.mini-cal .fc .fc-button{ border-radius:8px; padding:6px 8px; font-size:12px; }
.mini-cal .fc .fc-daygrid-day-number{ font-weight:600; }
.mini-cal .fc .fc-daygrid-day-frame{ padding:6px 6px 8px 6px; }

/* Highlight today */
.fc-daygrid-day.fc-day-today{ background: linear-gradient(180deg, #fff, #f7f9ff) !important; box-shadow: inset 0 0 0 2px rgba(0, 102, 255, .12); border-radius: 8px; }

/* Hive red for event days */
.fc-daygrid-day.event-day{ background: var(--hive-red) !important; color: #fff !important; border-radius: 8px; }
.fc-daygrid-day.event-day .fc-daygrid-day-number{ color:#fff !important; font-weight:800; }
.fc-daygrid-day.event-day .fc-event{ color:#fff !important; background:transparent !important; border:none !important; font-weight:700 !important; }

/* +n more link hidden (keeps layout tidy in mini calendars) */
.fc .fc-daygrid-more-link {
  display: none !important;
  pointer-events: none !important;
}

/* bottom controls under mini calendars */
.mini-controls{ display:flex; gap:10px; align-items:center; margin-top:6px; }
.events-panel{ background:var(--bg-white); padding:12px; border-radius:12px; box-shadow:var(--shadow); }
.panel-header{ display:flex; justify-content:space-between; align-items:center; }
.events-list{ margin-top:10px; display:flex; flex-direction:column; gap:12px; max-height:420px; overflow:auto; padding-right:6px; }

/* event card */
.event-card{ display:flex; gap:12px; align-items:flex-start; padding:12px; border-radius:12px; background: linear-gradient(180deg,#fff,var(--hive-light-gray)); border:1px solid rgba(16,24,40,0.04); box-shadow: 0 8px 20px rgba(10,12,20,0.03); transition:var(--transition); }
.event-card:hover{ transform: translateY(-6px); }
.event-card[role="button"]{ cursor:pointer; }
.event-thumb{ width:100px; height:70px; border-radius:10px; overflow:hidden; background:#f0f2f6; display:flex; align-items:center; justify-content:center; }
.event-thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
.event-meta{ flex:1 }
.event-title{ font-weight:800; margin:0; color:var(--hive-black) }
.event-dates{ font-size:12px; color:var(--text-secondary); margin-top:6px }
.event-funds{ margin-top:6px; font-weight:800; color:var(--hive-red) }
.event-cta{ margin-top:8px; display:flex; gap:8px }
.event-card.completed{ opacity:.62; transform: none; }

/* Right column */
.right-col{ display:flex; flex-direction:column; gap:14px; }
.charts-grid.single{ display:grid; grid-template-columns: 1fr; gap:12px; }
.card{ background:var(--bg-white); border-radius:12px; padding:12px; box-shadow:var(--shadow); }
.card-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:6px; }
.chart-card canvas{ width:100% !important; height:auto !important; }

/* Map card */
.map-card{ display:flex; flex-direction:column; gap:8px; height:auto; padding:10px; }

/* modal style */
.modal{ position:fixed; inset:0; z-index:1800; display:none; align-items:center; justify-content:center; }
.modal[aria-hidden="false"]{ display:flex; animation: fadeIn .18s ease-out; }
@keyframes fadeIn{ from{ opacity:0; transform: scale(.98);} to{ opacity:1; transform: scale(1);} }
.modal-backdrop{ position:absolute; inset:0; background:rgba(5,10,20,0.45); backdrop-filter: blur(4px); }
.modal-panel{ position:relative; width:95%; max-width:1200px; margin:20px; background:linear-gradient(180deg,#fff,var(--bg-white)); border-radius:14px; padding:18px; z-index:2; box-shadow: 0 30px 80px rgba(5,10,20,0.35); }
.modal-top{ display:flex; align-items:center; justify-content:space-between; margin-bottom:10px; }

/* drawer */
.drawer{ position:fixed; right:18px; top:18px; bottom:18px; width:520px; background:var(--bg-white); padding:18px 18px 30px 18px; border-radius:14px; box-shadow: 0 30px 80px rgba(5,10,20,0.35); z-index:1900; transform: translateX(20px); opacity:0; transition:var(--transition); pointer-events:none; overflow:auto; }
.drawer[aria-hidden="false"]{ transform: translateX(0); opacity:1; pointer-events:auto; }
.drawer-close{ position:absolute; right:12px; top:12px; background:transparent; border:none; font-size:18px; cursor:pointer; color:var(--muted); }
.drawer img{ width:100%; height:220px; object-fit:cover; border-radius:10px; margin-bottom:10px; }
.drawer-main{ padding-top:10px; }

/* hive posts area in drawer */
#hive-posts{ margin-top:12px; }
.hive-post{ display:flex; gap:10px; align-items:center; padding:8px; border-radius:10px; background:#fafafa; margin-bottom:8px; cursor:pointer; }
.hive-post img{ width:68px; height:48px; object-fit:cover; border-radius:8px; }

/* onboarding pill style (also used for manual count link) */
.onboarding-pill{
  display:inline-block;
  margin-top:10px;
  background: linear-gradient(90deg, rgba(227,19,55,0.07), rgba(227,19,55,0.02));
  border: 1px solid rgba(227,19,55,0.12);
  color: var(--hive-red);
  font-weight:700;
  padding:8px 12px;
  border-radius:999px;
  box-shadow: 0 8px 20px rgba(155,15,34,0.06);
  font-size:13px;
}
.onboarding-pill a{ color:inherit; text-decoration:none; font-weight:800 }

/* Event Information button (azul translúcido, mismo grosor) */
.event-info-btn{
  display:inline-block;
  padding:10px 14px; /* coincide con otros botones (grosor igual) */
  font-size:14px;
  font-weight:700;
  border-radius:12px;
  background: rgba(0, 123, 255, 0.15); /* azul translúcido */
  color: #007bff;
  border: 1px solid rgba(0, 123, 255, 0.35);
  cursor:pointer;
  transition: var(--transition);
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
}
.event-info-btn:hover{
  background: rgba(0, 123, 255, 0.25);
  border-color: rgba(0,123,255,0.6);
  color:#0056b3;
}

/* Event Information panel */
.event-info-panel{
  margin-top:12px;
  background: linear-gradient(180deg,#fff,var(--bg-white));
  border-radius:10px;
  padding:12px;
  box-shadow: var(--shadow);
  border:1px solid rgba(16,24,40,0.04);
}
.event-info-row{ margin-bottom:10px; }
.event-info-row h5{ margin:0 0 6px 0; font-size:13px; color:var(--muted); font-weight:700; }
.event-info-row p{ margin:0; color:var(--text-secondary); font-size:14px; line-height:1.45; }

/* helpers */
.muted{ color:var(--muted); font-size:12px; }

@media(max-width:1080px){
  .layout{ grid-template-columns: 1fr; }
  .charts-grid.single{ grid-template-columns: 1fr; }
  .mini-cal{ height:240px; }
  .drawer{ width:90%; left:5%; right:5% }
}
